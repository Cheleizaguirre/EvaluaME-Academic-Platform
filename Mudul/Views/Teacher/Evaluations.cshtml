@{
    ViewData["Title"] = "Evaluaciones y Calificaciones";
    Layout = "_LayoutTeacher";
}

@* Menu de navegacion *@
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>Gestor de Examenes</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item">
                        @{
                            var controllerName = "Home";
                            if (User.IsInRole("Teacher"))
                            {
                                controllerName = "Teacher";
                            }
                            else if (User.IsInRole("Coordinator"))
                            {
                                controllerName = "Coordinator";
                            }
                        }
                        <a href="@Url.Action("Index", controllerName)">
                            @controllerName
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="#">
                            CLASE
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="#">
                            Edit
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a>
                            Gestor de Exámenes
                        </a>
                    </li>
                </ol>
            </div>
        </div>

    </div>
</div>


<div class="container pt-4">

    <!-- Pestañas para Evaluaciones y Calificaciones -->
    <ul class="nav nav-tabs" id="evaluationTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="evaluations-tab" data-bs-toggle="tab" data-bs-target="#evaluations" type="button" role="tab" aria-controls="evaluations" aria-selected="true">
                Evaluaciones
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="grades-tab" data-bs-toggle="tab" data-bs-target="#grades" type="button" role="tab" aria-controls="grades" aria-selected="false">
                Calificaciones
            </button>
        </li>
    </ul>

    <div class="tab-content mt-3" id="evaluationTabContent">
        <!-- Pestaña Evaluaciones -->
        <div class="tab-pane fade show active" id="evaluations" role="tabpanel" aria-labelledby="evaluations-tab">
            <div class="mb-3">
                <button type="button" class="btn btn-success" onclick="location.href='@Url.Action("Index", "Exams")'">
                    Crear Nueva Actividad
                </button>
            </div>

            <!-- Evaluaciones por Parcial -->
            <div class="mt-4">
                <h3>Primer Parcial</h3>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Título</th>
                            <th>Descripción</th>
                            <th>Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Placeholder: Aquí se deben renderizar las evaluaciones del Primer Parcial -->
                        <tr>
                            <td>Evaluación 1</td>
                            <td>Descripción de Evaluación 1</td>
                            <td>10/03/2025</td>
                            <td>
                                <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal" data-bs-target="#modalVerCalificaciones">
                                    Ver Calificaciones
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4" class="text-center">No hay evaluaciones registradas</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Segundo Parcial</h3>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Título</th>
                            <th>Descripción</th>
                            <th>Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Placeholder: Aquí se deben renderizar las evaluaciones del Segundo Parcial -->
                        <tr>
                            <td colspan="4" class="text-center">No hay evaluaciones registradas</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pestaña Calificaciones -->
        <div class="tab-pane fade" id="grades" role="tabpanel" aria-labelledby="grades-tab">
            <div class="mt-4">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Actividad</th>
                            <th>Promedio</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Placeholder: Se debe renderizar un resumen de calificaciones por actividad -->
                        <tr>
                            <td>Evaluación 1</td>
                            <td>--</td>
                            <td>
                                <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal" data-bs-target="#modalVerCalificaciones">
                                    Ver Detalle
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="text-center">No hay calificaciones registradas</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Cargamos las vistas parciales para los modals -->
@await Html.PartialAsync("_ModalNuevaActividad")
@await Html.PartialAsync("_ModalVerCalificaciones")

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
}
