@model dynamic

@{
    string controllerName = Model.Role switch
    {
        "Teacher" => "Teacher",
        "Student" => "Student",
        "Coordinator" => "Coordinator",
        "Admin" => "Admin",
        _ => ""
    };
    if (controllerName == "")
    {
        throw new Exception("FATAL ERROR");
    }

    var controllerBackgrounds = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase)
    {
        { "Teacher", "card-info" },
        { "Student", "card-lightblue" },
        { "Coordinator", "card-olive" },
        { "Admin", "card-navy" }
    };

    string cardColor = controllerBackgrounds.ContainsKey(controllerName) ? controllerBackgrounds[controllerName] : "card-secondary";
}

<div class="container-fluid">
    <div class="card @cardColor">
        <div class="card-header">
            <h3 class="card-title">Área de Edición</h3>
        </div>
        <form asp-controller="@controllerName" asp-action="Edit" method="post" id="editProfileForm">
            <div class="card-body">
                <input type="hidden" name="Id" value="@Model.Id">
                <input type="hidden" name="Role" value="@Model.Role">

                <div class="form-group">
                    <label for="userName">Nombre</label>
                    <input type="text" class="form-control" id="name" name="UserName" value="@Model.UserName" required>
                </div>

                <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" class="form-control" id="email" name="Email" value="@Model.Email" required>
                </div>

                <div class="form-group">
                    <label for="phoneNumber">Teléfono</label>
                    <input type="text" class="form-control" id="phoneNumber" name="PhoneNumber" value="@Model.PhoneNumber">
                </div>

                <div class="form-group">
                    <label for="password">Contraseña (dejar en blanco para no cambiar)</label>
                    <input type="password" class="form-control" id="password" name="Password">
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirmar Contraseña</label>
                    <input type="password" class="form-control" id="confirmPassword" name="ConfirmPassword">
                </div>
            </div>

            <div class="card-footer text-right">
                <button type="button" class="btn btn-secondary btn-flat" onclick="window.history.back();">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button type="submit" class="btn btn-primary btn-flat">
                    <i class="fas fa-save"></i> Guardar
                </button>
            </div>
        </form>
    </div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("editProfileForm");

        form.addEventListener("submit", function (e) {
            e.preventDefault(); // Evita el envío automático

            Swal.fire({
                title: "¿Guardar cambios?",
                text: "Se actualizarán los datos de tu perfil.",
                icon: "question",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Sí, guardar",
                cancelButtonText: "Cancelar"
            }).then((result) => {
                if (result.isConfirmed) {
                    form.submit(); // Envía el formulario manualmente
                }
            });
        });
    });
</script>

